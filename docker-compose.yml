version: "3.9"

services:
  mockingbird:
    image: charleslobo77/mockingbird:${MOCKINGBIRD_VERSION:-latest}
    container_name: mockingbird
    restart: unless-stopped
    ports:
      - "6625:6625"  # Proxy port
      - "6626:6626"  # Admin API port
    volumes:
      - ~/.config/mockingbird:/app/config
    environment:
      - MOCKINGBIRD_PROXY_PORT=6625
      - MOCKINGBIRD_ADMIN_PORT=6626
      - MOCKINGBIRD_CONFIG_DIR=/app/config
      - LOCALHOST_CONTAINER_URL=host.docker.internal
    extra_hosts:
      - "host.docker.internal:host-gateway"

  # Example: A service that uses Mockingbird
  # my-app:
  #   image: my-app:latest
  #   environment:
  #     - SERVICEX_BASE_URL=http://mockingbird:6625/servicex
  #     - OPENAI_BASE_URL=http://mockingbird:6625/openai
  #   depends_on:
  #     - mockingbird
